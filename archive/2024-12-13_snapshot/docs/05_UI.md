# UI Modul Dokument√°ci√≥

> **F√°jlok:** DebugPanel.js, CameraDebug.js, RockDebug.js, TextureDebugger.js
> 
> Tweakpane alap√∫ debug kontrollok √©s overlay-ek.

---

## üì¶ DebugPanel.js

F≈ë Tweakpane panel a j√°t√©k be√°ll√≠t√°sokhoz.

```javascript
import { Pane } from 'tweakpane';

export class DebugPanel {
    constructor(game) {
        this.game = game;
        this.pane = new Pane({ title: 'Debug Panel' });
        
        this.setupTerrainFolder();
        this.setupUnitFolder();
        this.setupCameraFolder();
    }
    
    setupTerrainFolder() {
        const folder = this.pane.addFolder({ title: 'Terrain' });
        
        // Height multiplier
        folder.addBinding(this.game.planet.terrain.params, 'heightMultiplier', {
            min: 0, max: 20, step: 0.1
        }).on('change', () => this.game.planet.regenerate());
        
        // Water level
        folder.addBinding(this.game.planet.terrain.params, 'waterLevel', {
            min: 0, max: 5, step: 0.1
        });
        
        // Noise type
        folder.addBinding(this.game.planet.terrain.params, 'noiseType', {
            options: { Standard: 'standard', Ridged: 'ridged', Billow: 'billow' }
        });
        
        // Mountain parameters
        folder.addBinding(this.game.planet.terrain.params, 'mountainScale', { min: 0.1, max: 10 });
        folder.addBinding(this.game.planet.terrain.params, 'mountainStrength', { min: 0, max: 2 });
        
        // Color gradient
        const colorFolder = folder.addFolder({ title: 'Colors' });
        colorFolder.addBinding(this.game.planet.terrain.params, 'colorLowest', { view: 'color' });
        colorFolder.addBinding(this.game.planet.terrain.params, 'colorWater', { view: 'color' });
        colorFolder.addBinding(this.game.planet.terrain.params, 'colorMid', { view: 'color' });
        colorFolder.addBinding(this.game.planet.terrain.params, 'colorHighest', { view: 'color' });
    }
    
    setupUnitFolder() {
        const folder = this.pane.addFolder({ title: 'Unit & Vision' });
        
        // Unit speed
        folder.addBinding(this.game.unitParams, 'speed', { min: 1, max: 20 });
        folder.addBinding(this.game.unitParams, 'turnSpeed', { min: 0.5, max: 5 });
        folder.addBinding(this.game.unitParams, 'groundOffset', { min: 0, max: 2 });
        
        // Vision radius (if unit selected)
        folder.addBinding(this.game, 'visionRadius', { min: 5, max: 50 });
    }
    
    setupCameraFolder() {
        const folder = this.pane.addFolder({ title: 'Camera' });
        
        const config = this.game.cameraControls.config;
        
        // Distance limits
        folder.addBinding(config, 'minDistance', { min: 0.5, max: 10 });
        folder.addBinding(config, 'maxDistance', { min: 100, max: 1000 });
        
        // Zoom speeds
        folder.addBinding(config, 'zoomInImpulse', { min: 0.01, max: 0.2, step: 0.01 });
        folder.addBinding(config, 'zoomOutImpulse', { min: 0.01, max: 0.1, step: 0.01 });
        
        // RMB Orbit subfolder
        const orbitFolder = folder.addFolder({ title: 'RMB Orbit' });
        orbitFolder.addBinding(config, 'orbitAlignmentSpeed', { 
            min: 0, max: 2, step: 0.05, 
            label: 'Alignment (Roll)' 
        });
        orbitFolder.addBinding(config, 'orbitCenteringSpeed', { 
            min: 0, max: 0.01, step: 0.0005, 
            label: 'Centering (LookAt)' 
        });
        
        // Star distance
        folder.addBinding(this.game, 'starDistance', { min: 100, max: 1000 });
    }
}
```

---

## üì¶ CameraDebug.js

Kamera √°llapot overlay (fejleszt√©shez).

```javascript
export class CameraDebug {
    constructor(game) {
        this.game = game;
        
        // Create overlay div
        this.overlay = document.createElement('div');
        this.overlay.id = 'camera-debug';
        this.overlay.style.cssText = `
            position: fixed;
            top: 10px;
            left: 10px;
            background: rgba(0,0,0,0.7);
            color: #0f0;
            font-family: monospace;
            font-size: 12px;
            padding: 10px;
            pointer-events: none;
            z-index: 9999;
            display: none;
        `;
        document.body.appendChild(this.overlay);
        
        // Toggle with backtick key
        window.addEventListener('keydown', (e) => {
            if (e.key === '`') {
                this.overlay.style.display = 
                    this.overlay.style.display === 'none' ? 'block' : 'none';
            }
        });
    }
    
    update() {
        const cam = this.game.cameraControls;
        const camera = this.game.camera;
        
        this.overlay.innerHTML = `
            <b>Camera Debug</b><br>
            Position: ${camera.position.x.toFixed(2)}, ${camera.position.y.toFixed(2)}, ${camera.position.z.toFixed(2)}<br>
            Distance: ${camera.position.length().toFixed(2)}<br>
            <br>
            <b>State</b><br>
            isDragging: ${cam.isDragging}<br>
            isOrbiting: ${cam.isOrbiting}<br>
            isFlying: ${cam.isFlying}<br>
            chaseTarget: ${cam.chaseTarget ? cam.chaseTarget.name : 'null'}<br>
            <br>
            <b>Zoom</b><br>
            zoomVelocity: ${cam.zoomVelocity?.toFixed(4) || '0'}<br>
            zoomAnchor: ${cam.zoomAnchor ? 'set' : 'null'}<br>
            <br>
            <b>Orbit</b><br>
            orbitPivot: ${cam.orbitPivot ? 'set' : 'null'}<br>
            closestObstacle: ${cam.closestObstacleDistance?.toFixed(2) || 'N/A'}
        `;
    }
}
```

---

## üì¶ RockDebug.js

Szikla rendszer kontrollok.

```javascript
export class RockDebug {
    constructor(game) {
        this.game = game;
        
        // Add folder to existing pane
        const folder = game.debugPanel.pane.addFolder({ title: 'Rocks' });
        
        // Rock parameters
        folder.addBinding(game.rockSystem.params, 'count', { min: 0, max: 200, step: 1 });
        folder.addBinding(game.rockSystem.params, 'seed', { min: 0, max: 99999, step: 1 });
        folder.addBinding(game.rockSystem.params, 'minScale', { min: 0.1, max: 5 });
        folder.addBinding(game.rockSystem.params, 'maxScale', { min: 0.5, max: 10 });
        
        // Regenerate button
        folder.addButton({ title: 'Regenerate Rocks' }).on('click', () => {
            game.rockSystem.generateRocks();
        });
    }
}
```

> **‚ö†Ô∏è Ismert probl√©ma:** A rock kontrollok nem m≈±k√∂dnek megfelel≈ëen - sz√ºks√©ges jav√≠t√°s.

---

## üì¶ TextureDebugger.js

FOW text√∫ra megjelen√≠t≈ë.

```javascript
export class TextureDebugger {
    constructor(renderer, texture) {
        this.renderer = renderer;
        this.texture = texture;
        
        // Canvas for texture display
        this.canvas = document.createElement('canvas');
        this.canvas.width = 256;
        this.canvas.height = 256;
        this.canvas.style.cssText = `
            position: fixed;
            bottom: 10px;
            right: 10px;
            border: 2px solid white;
            display: none;
        `;
        document.body.appendChild(this.canvas);
        
        this.ctx = this.canvas.getContext('2d');
    }
    
    update() {
        // Read texture pixels
        const pixels = new Uint8Array(this.texture.image.width * this.texture.image.height * 4);
        this.renderer.readRenderTargetPixels(/* ... */);
        
        // Draw to canvas
        const imageData = this.ctx.createImageData(256, 256);
        // ... copy pixels ...
        this.ctx.putImageData(imageData, 0, 0);
    }
    
    toggle() {
        this.canvas.style.display = 
            this.canvas.style.display === 'none' ? 'block' : 'none';
    }
}
```

---

## üé® CSS (style.css excerpts)

```css
/* Bottom Panel */
#bottom-panel {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    height: var(--panel-height);
    background: linear-gradient(to top, rgba(0, 20, 30, 0.98), rgba(0, 30, 45, 0.95));
    transform: translateY(calc(100% - var(--tab-height)));
    transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

body.split-screen #bottom-panel {
    transform: translateY(0);
}

/* Unit Tabs */
#unit-tabs {
    display: flex;
    height: var(--tab-height);
    background: rgba(0, 0, 0, 0.3);
    border-bottom: 1px solid rgba(0, 255, 157, 0.2);
}

.unit-tab {
    flex: 0 0 120px;
    padding: 12px 20px;
    color: rgba(255, 255, 255, 0.6);
    cursor: pointer;
    transition: all 0.2s ease;
}

.unit-tab:hover {
    background: rgba(0, 255, 157, 0.1);
    color: white;
}

.unit-tab.active {
    background: rgba(0, 255, 157, 0.15);
    color: #00ff9d;
    border-bottom: 2px solid #00ff9d;
}

/* Toggle Button */
.panel-toggle-btn {
    position: absolute;
    right: 20px;
    top: 50%;
    transform: translateY(-50%);
    background: rgba(0, 255, 157, 0.2);
    border: 1px solid rgba(0, 255, 157, 0.4);
    border-radius: 4px;
    padding: 8px 12px;
    cursor: pointer;
}

body.split-screen .panel-toggle-btn .toggle-icon {
    transform: rotate(180deg);
}
```

---

*Gener√°lva: 2024-12-13*
